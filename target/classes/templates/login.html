<!DOCTYPE html>
<html lang="en" >
<head>
<meta charset="UTF-8">
<title>注册登录</title>

<!--图标库 可无视-->
<link rel='stylesheet' href='/css/font-awesome.min.css'>
  <link rel="shortcut icon" href="images/logo.jpg" type="image/x-icon" />
<!--核心样式-->
<link rel="stylesheet" href="/css/style.css">

</head>
<body>
<div class="container">
  <div class="card"></div>
  <div class="card">
    <h1 class="title">用户登录</h1>
    <form id="loginForm" method="post" >
      <div class="input-container">
        <input type="text" id="#{label}" name="user" required="required" />
        <label for="#{label}">用户名</label>
        <div class="bar"></div>
      </div>
      <div class="input-container">
        <input type="password" id="#{label}" name="pwd" required="required" />
        <label for="#{label}">密码</label>
        <div class="bar"></div>
      </div>
      <div class="button-container">
        <button type="button" id="btn"><span>登录</span></button>
      </div>
      <div><p style="color: red;text-align: center" id="err_msg"></p></div>
    </form>
  </div>
  <div class="card alt">
    <div class="toggle"></div>
    <h1 class="title">用户注册
      <div class="close"></div>
    </h1>
    <form id="registerForm" method="post" >
      <div class="input-container">
        <input type="text" id="#{label}" name="user" required="required" />
        <label for="#{label}">用户名</label>
        <div class="bar"></div>
      </div>
      <div class="input-container">
        <input type="text" id="#{label}" name="psw" required="required" />
        <label for="#{label}">密码</label>
        <div class="bar"></div>
      </div>
      <div class="input-container">
        <input type="text" id="#{label}" name="psw2" required="required" />
        <label for="#{label}">确认密码</label>
        <div class="bar"></div>
      </div>
      <div class="button-container">
        <button id="register" type="button"><span>提交注册</span></button>
      </div>
    </form>
  </div>
</div>

<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.js"></script>
<script src='/js/jquery.min.js'></script>

<script>
  $(".toggle").on("click", function () {
    $(".container").stop().addClass("active");
  });

  $(".close").on("click", function () {
    $(".container").stop().removeClass("active");
  });

  // 登录的接口
  $("#btn").click(function () {
    $.post("toLogin?",$("#loginForm").serialize(),function(res){
      if (res.flag){
        console.log(res);
        location.href = "main";
      } else {
        console.log(res);
        $("#err_msg").html(res.message);
      }
    },"json");
  });

  // 注册的接口
  $("#register").click(function () {
    $.post("toRegister?",$("#registerForm").serialize(),function(res){
      if (res.flag){
        alert("注册成功！");
      }
    },"json");
  });
</script>

<div style="text-align:center;">
</div>
</body>
</html>

